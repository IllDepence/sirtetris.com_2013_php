<div id="floatbox_r">
    <div class="innercontent_r">
        <h2>GitHub</h2>
        <ul>
            <li><a href="https://github.com/IllDepence/calyx">calyx</a></li>
            <li><a href="https://github.com/IllDepence/MALandBots">MALandBots</a></li>
            <li><a href="https://github.com/IllDepence/kanjiplot">kanjiplot</a></li>
            <li><a href="https://github.com/IllDepence/sirtetris.com">sirtetris.com</a></li>
        </ul>
    </div>

    <div class="innercontent_r">
        <h2>Misc</h2>
        <ul>
            <li><a href="?a=6a17efc0">DB hidden buttons</a></li>
            <li><a href="img/projects/ir_remote.png">1.88 € time-lapse</a></li>
            <ul>
                <li><a href="?a=d9000c79">blog entry</a></li>
            </ul>
            <li><a href="img/projects/lpc.jpg">Link pixel cookies</a></li>
        </ul>
    </div>
</div>

<div id="floatbox_l">
    <!-- <div class="innercontent_l">
        <h1></h1>
        <p><em></em></p>
        <br />
    </div> -->

    <div class="innercontent_l">
        <h1>日本語</h1>
        <p><em>私は頑張ります！</em></p>
        <br />
        <img src="img/projects/jp.png" alt="jp.png" />
        <br />
        <p>I started off with three beginner level Japanese courses offered by the language center at my uni. Once they were over I continued learning on my own.</p>
        <div class="hr"></div>
        <h3>Progress</h3>
        <br />
        <div id="graph"><img src="img/projects/kanjistats.png" alt="kanjistats.png" /></div>
        <p>(plotted using <a href="https://github.com/IllDepence/kanjiplot">this script</a>)</p>
        <div class="hr"></div>
        <h3>Timeline</h3>
        <br />
        <table>
            <tr>
            <td>13/03/27</td>
            <td>started taking three beginner level courses offered by the language center at my university</td>
            </tr>
            <tr>
            <td>13/04/14</td>
            <td>started posting on <a href="http://lang-8.com/588644/">Lang 8</a></td>
            </tr>
            <tr>
            <td>13/05/21</td>
            <td>started learning kanji with <a href="http://ankisrs.net/">Anki</a></td>
            </tr>
            <tr>
            <td>13/06/18</td>
            <td><a href="?a=e61bc488">100 kanji</a></td>
            </tr>
            <tr>
            <td>13/07/10</td>
            <td>finished beginner level courses (<a href="https://en.wikipedia.org/wiki/Grading_systems_by_country#Germany">1.0, 1.0, 1.3</a>)</td>
            </tr>
            <tr>
            <td>13/09/03</td>
            <td><a href="?a=6a66c49c">200 kanji</a></td>
            </tr>
            <tr>
            <td>13/09/19</td>
            <td>500 words vocabulary</td>
            </tr>
            <tr>
            <td>13/10/03</td>
            <td><a href="?a=51c3029e">300 kanji</a></td>
            </tr>
            <tr>
            <td>13/10/05</td>
            <td>started my <a href="http://moc.sirtetris.com/grammar_rush/">"grammar rush"</a></td>
            </tr>
            <tr>
            <td>13/11/09</td>
            <td><a href="?a=82d546f5">400 kanji</a></td>
            </tr>
            <tr>
            <td>13/11/16</td>
            <td>1000 words vocabulary</td>
            </tr>
            <td>13/11/28</td>
            <td>finished the <a href="http://moc.sirtetris.com/grammar_rush/">"grammar rush"</a></td>
            </tr>
            <tr>
            <td>13/12/01</td>
            <td>started a <a href="http://moc.sirtetris.com/re_rush/">"re rush"</a></td>
            </tr>
            <tr>
            <td>13/12/10</td>
            <td><a href="?a=7b41827f">500 kanji</a> and 100 entries on <a href="http://lang-8.com/">Lang-8</a></td>
            </tr>
            <tr>
            <td>13/12/30</td>
            <td>finished the <a href="http://moc.sirtetris.com/re_rush/">"re rush"</a></td>
            </tr>
            <tr>
            <td>14/01/01</td>
            <td>started my <a href="http://moc.sirtetris.com/imabi_stroll/">"imabi stroll"</a></td>
            </tr>
            <tr>
            <td>14/01/11</td>
            <td><a href="?a=3d745068">600 kanji</a></td>
            </tr>
            <tr>
            <td>14/02/12</td>
            <td><a href="?a=cdbe6ee9">700 kanji</a></td>
            </tr>
            <tr>
            <td>14/02/23</td>
            <td>finished the <a href="http://moc.sirtetris.com/imabi_stroll/">"imabi stroll"</a></td>
            </tr>
            <tr>
            <td>14/03/10</td>
            <td>2000 words vocabulary</td>
            </tr>
            <tr>
            <td>14/03/18</td>
            <td><a href="?a=26ea4c37">800 kanji</a></td>
            </tr>
            <tr>
            <td>14/05/07</td>
            <td><a href="?a=53833ada">900 kanji</a></td>
            </tr>
            <tr>
            <td>14/06/28</td>
            <td><a href="?a=62f53ec0">1000 kanji</a></td>
            </tr>
            <td>14/08/08</td>
            <td><a href="?a=412c3df8">1100 kanji</a></td>
            </tr>
            </tr>
            <tr>
            <td>14/08/23</td>
            <td>3000 words vocabulary</td>
            </tr>
            <td>14/09/11</td>
            <td><a href="?a=49fc37e4">1200 kanji</a></td>
            </tr>
        </table>
    </div>

    <div class="innercontent_l">
        <h1>Raspberry Pi</h1>
        <p><em>An ARM GNU/Linux box for $25. Take a byte!</em></p>
        <br />
        <img src="img/projects/rpi.png" alt="rpi.png" />
        <br />
        <p><a href="http://www.raspberrypi.org/">Raspberry Pis</a>! But tbh ... I just want to show off my awesome lego case. :3 Until now my Pis ran Arch Linux, Gentoo, FreeBSD, Raspbian and Raspbmc. I really want to try out <a href="http://www.cl.cam.ac.uk/freshers/raspberrypi/tutorials/os/">Baking Pi</a> some time.</p>
    </div>

    <div class="innercontent_l">
        <h1>Personal website</h1>
        <p><em>I really don't know why I do this apart from than that it's fun.</em></p>
        <br />
        <img src="img/projects/websites.png" alt="websites.png" />
        <br />
        <p>Started doing this in 2005. Content changes over time as do my interests.</p>
    </div>
</div>
<script>
document.querySelector('#graph').innerHTML='';
var st = document.createElement('link');
st.rel = 'stylesheet';
st.type = 'text/css';
st.href = 'img/projects/d3graph.css'
document.querySelector('head').appendChild(st);

function loadd3(callback) {
    var d3 = document.createElement('script');
    d3.src='img/projects/d3/d3.js';
    d3.charset='utf-8';
    d3.async = true;
    d3.onreadystatechange = d3.onload = function() {
        var state = d3.readyState;
        if (!callback.done && (!state || /loaded|complete/.test(state))) {
            callback.done = true;
            callback();
        }
    };
    document.querySelector('head').appendChild(d3);
}

function refub(data) {
    return {
        date: parseDate(data[0]),
        kanji: data[1],
        words: data[2],
        rate: data[3]
        }
    }
function parseData(rows) {
    var data = dsv.parseRows(rows, refub);
    show(data);
    }
function show(data) {
    x.domain(d3.extent(data, function(d) { return d.date; }));
    var wmax = d3.max(data.map(function(data) { return +data.words }))
    var kmax = d3.max(data.map(function(data) { return +data.kanji }))
    var rmax = d3.max(data.map(function(data) { return +data.rate }))
    y0.domain([0, wmax]);
    y1.domain([0, rmax]);
    var kline = d3.svg.line()
                      .x(function(d) { return x(d.date); })
                      .y(function(d) { return y0(d.kanji); });
    var wline = d3.svg.line()
                      .x(function(d) { return x(d.date); })
                      .y(function(d) { return y0(d.words); });
    var rline = d3.svg.line()
                      .x(function(d) { return x(d.date); })
                      .y(function(d) { return y1(d.rate); });
    svg.append('g')
       .attr('class', 'x axis')
       .attr('transform', 'translate(0,' + height + ')')
       .call(xAxis)
       .selectAll('text')
         .style('text-anchor', 'end')
         .attr('transform', 'rotate(-90)')
         .attr('dy', '-5px')
         .attr('dx', '-9px');
    svg.append('g')
       .attr('class', 'y axis')
       .attr('transform', 'translate(' + width + ', 0)')
       .call(yAxisRight);
    svg.append('g')
       .attr('class', 'y axis secondary')
       .attr('transform', 'translate(0, ' + height + ')')
       .attr('transform', 'rotate(90)')
       .call(yAxisLeft)
       .selectAll('text')
         .style('text-anchor', 'end')
         .attr('transform', 'rotate(-90)')
         .attr('dy', '-5px')
         .attr('dx', '-9px');
    var line = svg.append('g')
                  .attr('class', 'line')
    line.append('path')
        .attr('class', 'kanji')
        .attr('d', kline(data));
    line.append('path')
        .attr('class', 'words')
        .attr('d', wline(data));
    line.append('path')
        .attr('class', 'rate secondary')
        .attr('d', rline(data));
    var focus = svg.append('g')
                   .attr('class', 'focus')
                   .style('display', 'none');
    var fline = focus.append('line')
                     .attr('y1', height-1)
                     .attr('y2', 0);
    var vlinek = focus.append('line')
                      .attr('x2', width-1)
                      .attr('class', 'kanji');
    var vlinew = focus.append('line')
                      .attr('x2', width-1)
                      .attr('class', 'words');
    var valw = svg.append('text')
                  .attr('x', 20)
                  .attr('y', 15)
                  .attr('class', 'wordstext')
                  .text('words: ' + wmax);
    var valk = svg.append('text')
                  .attr('x', 22)
                  .attr('y', 32)
                  .attr('class', 'kanjitext')
                  .text('kanji: ' + kmax);
    var valr = svg.append('text')
                  .attr('x', 22)
                  .attr('y', 49)
                  .attr('class', 'secondary')
                  .text('kanji/month: -');
    svg.append('rect')
       .attr('class', 'overlay')
       .attr('width', width)
       .attr('height', height)
       .on('mousemove', mousemove)
       .on('mouseover', function() { focus.style('display', null); })
       .on('mouseout', function() { focus.style('display', 'none');
                                    valw.text('words: ' + wmax);
                                    valk.text('kanji: ' + kmax);
                                    valr.text('kanji/month: -'); });
    dates = data.map(function(d) { return d.date });
    function mousemove() {
        var mx = d3.mouse(this)[0],
            dx = x.invert(mx),
            idx = d3.bisectLeft(dates, dx),
            kanji = data[idx].kanji,
            words = data[idx].words;
        fline.attr('x1', mx).attr('x2', mx);
        vlinek.attr('x1', mx)
              .attr('y1', y0(data[idx].kanji))
              .attr('y2', y0(data[idx].kanji));
        valk.text('kanji: ' + data[idx].kanji);
        vlinew.attr('x1', mx)
              .attr('y1', y0(data[idx].words))
              .attr('y2', y0(data[idx].words));
        valw.text('words: ' + data[idx].words);
        valr.text('kanji/month: ' + data[idx].rate);
        }
    }

loadd3(function() {

margin = {top: 6, right: 54, bottom: 64, left: 54},
    width = 700 - margin.left - margin.right,
    height = 300 - margin.top - margin.bottom;
parseDate = d3.time.format('%y%m%d').parse;
x = d3.time.scale()
          .range([0, width]);
y0 = d3.scale.linear()      // kanji & vocab
          .range([height, 0]);
y1 = d3.scale.linear()      // kanji rate
          .range([height, 0]);
color = d3.scale.category10();
xAxis = d3.svg.axis()
              .scale(x)
              .tickFormat(function(d) {
                    mo = d3.time.format('%b')
                    jo = d3.time.format('%Y')
                    if(mo(d) != 'Jan') return mo(d)
                    else return jo(d)
                    })
              .orient('bottom');
yAxisRight = d3.svg.axis()
              .scale(y0)
              .orient('right');
yAxisLeft = d3.svg.axis()
              .scale(y1)
              .orient('Left');
svg = d3.select('#graph').append('svg')
            .attr('width', width + margin.left + margin.right)
            .attr('height', height + margin.top + margin.bottom)
            .append('g')
            .attr('transform', 'translate('+margin.left+','+margin.top+')');
dsv = d3.dsv(' ', 'text/plain');
d3.text('img/projects/kanji.dat', 'text/plain', function(text) {
    lines = text.split('\n');
    var currMonth = -1;
    var lastMonth = -1;
    var monthDelta = -1;
    for(var i=0; i<lines.length; i++) {
        if(lines[i].length==0) continue;
        var parts = lines[i].split(' ');
        var date = parseDate(parts[0]);
        var kanji = parts[1];
        var words = parts[2];
        getDeltaMonth = date.getMonth();
        if(getDeltaMonth == lastMonth) {
            }
        else {
            currMonth = getDeltaMonth;
            monthLow = kanji;
            for(var j=i; currMonth==getDeltaMonth; j++) {
                if(typeof(lines[j])=='undefined') break;
                if(lines[j].length==0) continue;
                var tparts = lines[j].split(' ');
                var tdate = parseDate(tparts[0]);
                var tkanji = tparts[1];
                currMonth = tdate.getMonth();
                monthHigh = tkanji;
                }
            monthDelta = monthHigh-monthLow;
            }
        parts.push(monthDelta)
        lines[i] = parts.join(' ');
        lastMonth = getDeltaMonth;
        }
    text = lines.join('\n');
    parseData(text);
    });

});
</script>
